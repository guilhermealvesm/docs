# Microservice: Channel Service

## âœ¨ VisÃ£o Geral
O **Channel Service** Ã© um microserviÃ§o orientado a eventos, responsÃ¡vel por gerenciar os canais de comunicaÃ§Ã£o da plataforma **A Arca**. Ele Ã© responsÃ¡vel por receber, processar e enviar mensagens via diferentes canais.

Atualmente, estÃ¡ integrado ao **WhatsApp Web** via a biblioteca **Baileys**. Em breve, tambÃ©m integrarÃ¡:

- Evolution
- Facebook Messenger
- Instagram Direct
- Recursos da plataforma WhatsMeon

Essa arquitetura baseada em eventos permite uma expansÃ£o rÃ¡pida para novos canais.

---

## ğŸ“† Arquitetura e Componentes

### Diagrama Geral
> _VocÃª pode substituir este link por um link real hospedado no GitHub, CDN ou Mintlify_

![Arquitetura](https://user-images.githubusercontent.com/placeholder/microservice-diagram.png)

### Componentes Utilizados

| Componente             | FunÃ§Ã£o Principal                                     |
|------------------------|--------------------------------------------------|
| `baileys`              | Conecta com o WhatsApp Web via WebSocket        |
| `@node-ts/bus-core`    | Abstrai mensagens e comandos do RabbitMQ        |
| `redis`                | Cache rÃ¡pido e filas simples                    |
| `rabbitmq`             | Mensageria entre microserviÃ§os                 |
| `ffmpeg`               | Processamento de mÃ­dia (ex: Ã¡udio)            |
| `typescript`           | Tipagem estÃ¡tica e seguranÃ§a de cÃ³digo           |

---

## ğŸ”— DependÃªncias

- **Node.js** 20+
- **Redis** (padrÃ£o na porta 6379)
- **RabbitMQ** (usuÃ¡rio/senha configurados no `.env`)
- **PostgreSQL** (para persistÃªncia de eventos, se necessÃ¡rio)

---

## ğŸš€ ExecuÃ§Ã£o Local / Docker

```bash
# Build local
npm install
npm run build
npm start

# Docker
docker build -t aarca_channel .
docker run -d --env-file .env aarca_channel
```

---

## ğŸŒ Roadmap de Canais

| Canal         | Status             |
|---------------|--------------------|
| WhatsApp      | âœ… Implementado   |
| Evolution     | â³ Em desenvolvimento |
| Facebook      | âš– Planejado     |
| Instagram     | âš– Planejado     |
| WhatsMeon     | âœ… Parceria ativa |

---

## âš™ IntegraÃ§Ã£o com o Backend

Todos os eventos recebidos pelo Channel sÃ£o enviados para o Backend da Arca via fila RabbitMQ. O backend Ã© responsÃ¡vel por processar as mensagens, acionar webhooks e persistir os dados.

---

## ğŸ“… AtualizaÃ§Ãµes Futuras

- Suporte nativo para grupos WhatsApp
- Monitoramento de mensagens em tempo real via WebSocket
- Painel de canais e status de conexÃ£o

---

## âš¡ DÃºjvidas?
Entre em contato com a equipe de engenharia ou abra um PR com sugestÃµes para este microserviÃ§o ğŸš€

